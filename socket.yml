name: email-scheduler
description: Schedule your emails and remind about them.
version: 0.0.3
config:
  EMAIL_GENERATOR_ENDPOINT:
    required: true
    long_description: |
      This should be in format socket_name/endpoint_name. Given endpoint will
      receive email template name and data required to compile template. It must
      return email html and additional attachments.
classes:
  scheduled_emails:
    - name: token
      type: string
    - name: template
      type: string
    - name: payload
      type: object
    - name: is_canceled
      type: boolean
    - name: sent_reminders
      type: integer
    - name: reminded_at
      type: datetime
    - name: interval
      type: integer
event_handlers:
  schedule.interval.1_minute:
    file: remind.js
    description: Process scheduled emails and send reminders.
endpoints:
  schedule:
    description: Schedule email reminders.
  cancel:
    description: Cancel email reminders.
    parameters:
      token:
        type: string
        description: Token of email reminder.
  test:
    file: t.js
    description: Test file
